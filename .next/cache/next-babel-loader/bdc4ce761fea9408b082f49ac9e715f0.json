{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nvar _jsxFileName = \"/Users/kenny/eazyrent/pages/add-listing.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Dashboard from '../components/Dashboard/Dashboard';\n\nconst addlisting = () => {\n  const submitForm = async () => {\n    // let formData = new FormData();\n    // formData.append('title', document.getElementById('title').value);\n    // formData.append('address', document.getElementById('address').value);\n    // formData.append('price', document.getElementById('price').value);\n    // formData.append('payment', document.getElementById('payment').value);\n    // formData.append('city', document.getElementById('city').value);\n    // formData.append('state', document.getElementById('state').value);\n    // formData.append('beds', document.getElementById('beds').value);\n    // formData.append('baths', document.getElementById('baths').value);\n    // formData.append('images', document.getElementById('images').files[0]);\n    const images = _Array$from(document.getElementById('images').files);\n\n    const imagesToBeUploaded = [];\n\n    const renderImage = (image, i) => {\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        imagesToBeUploaded.push(reader.result);\n      });\n      reader.readAsDataURL(image);\n    };\n\n    imagesToBeUploaded = images.map(renderImage);\n    const dataToPost = {\n      user: \"abgfigu143668\",\n      name: document.getElementById('title').value,\n      address: document.getElementById('address').value,\n      price: document.getElementById('price').value,\n      type: document.getElementById('payment').value,\n      city: document.getElementById('city').value,\n      state: document.getElementById('state').value,\n      beds: document.getElementById('beds').value,\n      baths: document.getElementById('baths').value,\n      images: formData\n    };\n    const res = await fetch('http://localhost:3004/listings', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: _JSON$stringify(dataToPost)\n    });\n    const data = await res.json();\n    console.log('Success', _JSON$stringify(data));\n  }; // const getImages = async(files)=>{\n  //     console.log(files);\n  //     let formData = new FormData();\n  //     formData.append('images', files[0]);\n  //     const res = await fetch('http://localhost:3004/users', {\n  //         method: 'POST',\n  //         body: formData\n  //     });\n  //     const data = await res.json();\n  //     console.log('Image uploaded', JSON.stringify(data));\n  // }\n\n\n  return __jsx(Dashboard, {\n    route: \"add-listing\",\n    addListing: submitForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  });\n};\n\nexport default addlisting;","map":{"version":3,"sources":["/Users/kenny/eazyrent/pages/add-listing.js"],"names":["Dashboard","addlisting","submitForm","images","document","getElementById","files","imagesToBeUploaded","renderImage","image","i","reader","FileReader","addEventListener","push","result","readAsDataURL","map","dataToPost","user","name","value","address","price","type","city","state","beds","baths","formData","res","fetch","method","headers","body","data","json","console","log"],"mappings":";;;;;AAAA,OAAOA,SAAP,MAAsB,mCAAtB;;AAEA,MAAMC,UAAU,GAAG,MAAI;AACnB,QAAMC,UAAU,GAAG,YAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAMC,MAAM,GAAG,YAAWC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAA7C,CAAf;;AACA,UAAMC,kBAAkB,GAAG,EAA3B;;AAEA,UAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,CAAR,KAAY;AAC5B,YAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,MAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,MAAI;AAChCN,QAAAA,kBAAkB,CAACO,IAAnB,CAAwBH,MAAM,CAACI,MAA/B;AACH,OAFD;AAGAJ,MAAAA,MAAM,CAACK,aAAP,CAAqBP,KAArB;AACH,KAND;;AAQAF,IAAAA,kBAAkB,GAAGJ,MAAM,CAACc,GAAP,CAAWT,WAAX,CAArB;AAEA,UAAMU,UAAU,GAAG;AACfC,MAAAA,IAAI,EAAE,eADS;AAEfC,MAAAA,IAAI,EAAGhB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCgB,KAFzB;AAGfC,MAAAA,OAAO,EAAElB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCgB,KAH7B;AAIfE,MAAAA,KAAK,EAAGnB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCgB,KAJ1B;AAKfG,MAAAA,IAAI,EAAGpB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCgB,KAL3B;AAMfI,MAAAA,IAAI,EAAGrB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCgB,KANxB;AAOfK,MAAAA,KAAK,EAAGtB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCgB,KAP1B;AAQfM,MAAAA,IAAI,EAAGvB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCgB,KARxB;AASfO,MAAAA,KAAK,EAAGxB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCgB,KAT1B;AAUflB,MAAAA,MAAM,EAAG0B;AAVM,KAAnB;AAaA,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,gCAAD,EAAmC;AACtDC,MAAAA,MAAM,EAAE,MAD8C;AAEtDC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAF6C;AAKtDC,MAAAA,IAAI,EAAE,gBAAehB,UAAf;AALgD,KAAnC,CAAvB;AAOA,UAAMiB,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB,gBAAeH,IAAf,CAAvB;AACH,GA9CD,CADmB,CAiDnB;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;;;AAEA,SAAO,MAAC,SAAD;AAAW,IAAA,KAAK,EAAC,aAAjB;AAA+B,IAAA,UAAU,EAAEjC,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACH,CAlED;;AAoEA,eAAeD,UAAf","sourcesContent":["import Dashboard from '../components/Dashboard/Dashboard';\n\nconst addlisting = ()=>{\n    const submitForm = async()=>{\n        // let formData = new FormData();\n        // formData.append('title', document.getElementById('title').value);\n        // formData.append('address', document.getElementById('address').value);\n        // formData.append('price', document.getElementById('price').value);\n        // formData.append('payment', document.getElementById('payment').value);\n        // formData.append('city', document.getElementById('city').value);\n        // formData.append('state', document.getElementById('state').value);\n        // formData.append('beds', document.getElementById('beds').value);\n        // formData.append('baths', document.getElementById('baths').value);\n        // formData.append('images', document.getElementById('images').files[0]);\n        const images = Array.from(document.getElementById('images').files);\n        const imagesToBeUploaded = [];\n\n        const renderImage = (image, i)=>{\n            const reader = new FileReader();\n            reader.addEventListener('load', ()=>{\n                imagesToBeUploaded.push(reader.result);\n            });\n            reader.readAsDataURL(image); \n        }\n\n        imagesToBeUploaded = images.map(renderImage);\n\n        const dataToPost = {\n            user: \"abgfigu143668\",\n            name : document.getElementById('title').value,\n            address: document.getElementById('address').value,\n            price : document.getElementById('price').value,\n            type : document.getElementById('payment').value,\n            city : document.getElementById('city').value,\n            state : document.getElementById('state').value,\n            beds : document.getElementById('beds').value,\n            baths : document.getElementById('baths').value,\n            images : formData\n        }\n\n        const res = await fetch('http://localhost:3004/listings', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(dataToPost)\n        });\n        const data = await res.json();\n        console.log('Success', JSON.stringify(data));\n    }\n\n    // const getImages = async(files)=>{\n    //     console.log(files);\n\n    //     let formData = new FormData();\n    //     formData.append('images', files[0]);\n\n    //     const res = await fetch('http://localhost:3004/users', {\n    //         method: 'POST',\n    //         body: formData\n    //     });\n    //     const data = await res.json();\n    //     console.log('Image uploaded', JSON.stringify(data));\n\n\n    // }\n\n    return <Dashboard route=\"add-listing\" addListing={submitForm}/>;\n}\n\nexport default addlisting;"]},"metadata":{},"sourceType":"module"}