{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nvar _jsxFileName = \"/Users/kenny/eazyrent/pages/add-listing.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Dashboard from '../components/Dashboard/Dashboard';\n\nvar addlisting = function addlisting() {\n  var submitForm = function submitForm() {\n    var images, imagesToBeUploaded, reader, dataToPost, res, data;\n    return _regeneratorRuntime.async(function submitForm$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            images = _Array$from(document.getElementById('images').files);\n            imagesToBeUploaded = [];\n            reader = new FileReader();\n            images.forEach(function (v, i) {\n              console.log(images[i]);\n              window.addEventListener('load', function () {\n                imagesToBeUploaded.push(reader.result);\n              });\n              reader.readAsText(images[i]);\n              console.log(imagesToBeUploaded);\n            });\n            dataToPost = {\n              user: \"abgfigu143668\",\n              name: document.getElementById('title').value,\n              address: document.getElementById('address').value,\n              price: document.getElementById('price').value,\n              type: document.getElementById('payment').value,\n              city: document.getElementById('city').value,\n              state: document.getElementById('state').value,\n              beds: document.getElementById('beds').value,\n              baths: document.getElementById('baths').value,\n              images: imagesToBeUploaded\n            };\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(fetch('http://localhost:3004/listings', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: _JSON$stringify(dataToPost)\n            }));\n\n          case 7:\n            res = _context.sent;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 10:\n            data = _context.sent;\n            console.log('Success', _JSON$stringify(data));\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }; // const getImages = async(files)=>{\n  //     console.log(files);\n  //     let formData = new FormData();\n  //     formData.append('images', files[0]);\n  //     const res = await fetch('http://localhost:3004/users', {\n  //         method: 'POST',\n  //         body: formData\n  //     });\n  //     const data = await res.json();\n  //     console.log('Image uploaded', JSON.stringify(data));\n  // }\n\n\n  return __jsx(Dashboard, {\n    route: \"add-listing\",\n    addListing: submitForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  });\n};\n\nexport default addlisting;","map":{"version":3,"sources":["/Users/kenny/eazyrent/pages/add-listing.js"],"names":["Dashboard","addlisting","submitForm","images","document","getElementById","files","imagesToBeUploaded","reader","FileReader","forEach","v","i","console","log","window","addEventListener","push","result","readAsText","dataToPost","user","name","value","address","price","type","city","state","beds","baths","fetch","method","headers","body","res","json","data"],"mappings":";;;;;;AAAA,OAAOA,SAAP,MAAsB,mCAAtB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAI;AACnB,MAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,YAAAA,MADS,GACA,YAAWC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAA7C,CADA;AAETC,YAAAA,kBAFS,GAEY,EAFZ;AAGTC,YAAAA,MAHS,GAGA,IAAIC,UAAJ,EAHA;AAKfN,YAAAA,MAAM,CAACO,OAAP,CACI,UAACC,CAAD,EAAIC,CAAJ,EAAQ;AACJC,cAAAA,OAAO,CAACC,GAAR,CAAYX,MAAM,CAACS,CAAD,CAAlB;AACAG,cAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,YAAI;AAChCT,gBAAAA,kBAAkB,CAACU,IAAnB,CAAwBT,MAAM,CAACU,MAA/B;AACH,eAFD;AAGAV,cAAAA,MAAM,CAACW,UAAP,CAAkBhB,MAAM,CAACS,CAAD,CAAxB;AACAC,cAAAA,OAAO,CAACC,GAAR,CAAYP,kBAAZ;AACH,aARL;AAWMa,YAAAA,UAhBS,GAgBI;AACfC,cAAAA,IAAI,EAAE,eADS;AAEfC,cAAAA,IAAI,EAAGlB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCkB,KAFzB;AAGfC,cAAAA,OAAO,EAAEpB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCkB,KAH7B;AAIfE,cAAAA,KAAK,EAAGrB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCkB,KAJ1B;AAKfG,cAAAA,IAAI,EAAGtB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCkB,KAL3B;AAMfI,cAAAA,IAAI,EAAGvB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCkB,KANxB;AAOfK,cAAAA,KAAK,EAAGxB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCkB,KAP1B;AAQfM,cAAAA,IAAI,EAAGzB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCkB,KARxB;AASfO,cAAAA,KAAK,EAAG1B,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCkB,KAT1B;AAUfpB,cAAAA,MAAM,EAAGI;AAVM,aAhBJ;AAAA;AAAA,6CA6BGwB,KAAK,CAAC,gCAAD,EAAmC;AACtDC,cAAAA,MAAM,EAAE,MAD8C;AAEtDC,cAAAA,OAAO,EAAE;AACL,gCAAgB;AADX,eAF6C;AAKtDC,cAAAA,IAAI,EAAE,gBAAed,UAAf;AALgD,aAAnC,CA7BR;;AAAA;AA6BTe,YAAAA,GA7BS;AAAA;AAAA,6CAoCIA,GAAG,CAACC,IAAJ,EApCJ;;AAAA;AAoCTC,YAAAA,IApCS;AAqCfxB,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB,gBAAeuB,IAAf,CAAvB;;AArCe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB,CADmB,CAyCnB;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;;;AAEA,SAAO,MAAC,SAAD;AAAW,IAAA,KAAK,EAAC,aAAjB;AAA+B,IAAA,UAAU,EAAEnC,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACH,CA1DD;;AA4DA,eAAeD,UAAf","sourcesContent":["import Dashboard from '../components/Dashboard/Dashboard';\n\nconst addlisting = ()=>{\n    const submitForm = async()=>{\n        const images = Array.from(document.getElementById('images').files);\n        const imagesToBeUploaded = [];\n        const reader = new FileReader();\n\n        images.forEach(\n            (v, i)=>{\n                console.log(images[i]);\n                window.addEventListener('load', ()=>{\n                    imagesToBeUploaded.push(reader.result);\n                });\n                reader.readAsText(images[i]);\n                console.log(imagesToBeUploaded);\n            }\n        );\n\n        const dataToPost = {\n            user: \"abgfigu143668\",\n            name : document.getElementById('title').value,\n            address: document.getElementById('address').value,\n            price : document.getElementById('price').value,\n            type : document.getElementById('payment').value,\n            city : document.getElementById('city').value,\n            state : document.getElementById('state').value,\n            beds : document.getElementById('beds').value,\n            baths : document.getElementById('baths').value,\n            images : imagesToBeUploaded\n        }\n\n        const res = await fetch('http://localhost:3004/listings', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(dataToPost)\n        });\n        const data = await res.json();\n        console.log('Success', JSON.stringify(data));\n    }\n\n    // const getImages = async(files)=>{\n    //     console.log(files);\n\n    //     let formData = new FormData();\n    //     formData.append('images', files[0]);\n\n    //     const res = await fetch('http://localhost:3004/users', {\n    //         method: 'POST',\n    //         body: formData\n    //     });\n    //     const data = await res.json();\n    //     console.log('Image uploaded', JSON.stringify(data));\n\n\n    // }\n\n    return <Dashboard route=\"add-listing\" addListing={submitForm}/>;\n}\n\nexport default addlisting;"]},"metadata":{},"sourceType":"module"}